<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Api Ajax Test</title>
    <script>
    window.addEventListener('load', function(){

        function getXhr()
        {
            return new XMLHttpRequest();
        }

        var base = 'http://wxt.wapu.cn/schedule/index.php';

        var xhr;

        xhr = getXhr();
        xhr.onreadystatechange = function(){

            if(this.readyState != 4)
                return;
            console.log('test');
            console.log(this.responseText);

            xhr = getXhr();
            xhr.onreadystatechange = function(){
                if(this.readyState != 4)
                    return;
                console.log('test2');
                console.log(this.responseText);
            };
            xhr.open('GET', base+'?r=api/accountInfo');
            xhr.withCredentials = true;
            xhr.send();
        };
        xhr.open('GET', base+'?r=api/doLogin&mobile=15618392588&password=2588');
        xhr.withCredentials = true;
        xhr.send();

    });
    </script>
</head>
<body>
</body>
</html>